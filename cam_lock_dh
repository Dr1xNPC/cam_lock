getgenv().Aimbot = {
    Status = true,
    Keybind = 'X',
    Hitpart = 'Head',
    Prediction = { X = 0.02, Y = 0.02 },
    GUIKeybind = 'RightControl',
    GUIVisible = true
}

-- Services
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- Player
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- UI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "LegitCamlockUI"
ScreenGui.Parent = game.CoreGui

local MainFrame = Instance.new("Frame")
MainFrame.Name = "Main"
MainFrame.Size = UDim2.new(0, 300, 0, 350)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -175)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 6)
UICorner.Parent = MainFrame

local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
TitleBar.BorderSizePixel = 0

local Title = Instance.new("TextLabel")
Title.Text = "LEGIT CAMLOCK"
Title.Size = UDim2.new(1, -40, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.TextColor3 = Color3.fromRGB(220, 220, 220)
Title.Font = Enum.Font.GothamSemibold
Title.TextSize = 14
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.BackgroundTransparency = 1

local CloseButton = Instance.new("TextButton")
CloseButton.Text = "Ã—"
CloseButton.Size = UDim2.new(0, 30, 1, 0)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.TextColor3 = Color3.fromRGB(220, 220, 220)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 18
CloseButton.BackgroundTransparency = 1

-- Content Frame
local Content = Instance.new("Frame")
Content.Name = "Content"
Content.Size = UDim2.new(1, -20, 1, -50)
Content.Position = UDim2.new(0, 10, 0, 40)
Content.BackgroundTransparency = 1

-- Toggle GUI Visibility
UIS.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode[Aimbot.GUIKeybind] then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

-- Function to create clean sliders
local function CreateSlider(parent, name, min, max, default, callback)
    local container = Instance.new("Frame")
    container.Size = UDim2.new(1, 0, 0, 60)
    container.BackgroundTransparency = 1
    
    local label = Instance.new("TextLabel")
    label.Text = name
    label.Size = UDim2.new(1, 0, 0, 20)
    label.TextColor3 = Color3.fromRGB(200, 200, 200)
    label.Font = Enum.Font.Gotham
    label.TextSize = 12
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.BackgroundTransparency = 1
    
    -- Slider track
    local track = Instance.new("Frame")
    track.Size = UDim2.new(1, 0, 0, 4)
    track.Position = UDim2.new(0, 0, 0, 25)
    track.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    track.BorderSizePixel = 0
    
    -- Slider fill
    local fill = Instance.new("Frame")
    fill.Size = UDim2.new((default - min)/(max - min), 0, 1, 0)
    fill.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
    fill.BorderSizePixel = 0
    
    -- Slider button
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 16, 0, 16)
    button.Position = UDim2.new(fill.Size.X.Scale, -8, 0, -6)
    button.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    button.AutoButtonColor = false
    
    -- Add to parent
    container.Parent = parent
    label.Parent = container
    track.Parent = container
    fill.Parent = track
    button.Parent = container
    
    -- Slider logic here (dragging, value updates, etc.)
end

-- Create UI elements
TitleBar.Parent = MainFrame
Title.Parent = TitleBar
CloseButton.Parent = TitleBar
Content.Parent = MainFrame
MainFrame.Parent = ScreenGui

-- Create settings controls
local yOffset = 0
local settings = {
    {name = "Camlock Key", type = "keybind", value = Aimbot.Keybind},
    {name = "Hitpart", type = "dropdown", options = {"Head", "HumanoidRootPart"}, value = Aimbot.Hitpart},
    {name = "Prediction X", type = "slider", min = 0, max = 0.1, value = Aimbot.Prediction.X},
    {name = "Prediction Y", type = "slider", min = 0, max = 0.1, value = Aimbot.Prediction.Y},
    {name = "GUI Keybind", type = "keybind", value = Aimbot.GUIKeybind}
}

-- Create controls for each setting
for _, setting in pairs(settings) do
    if setting.type == "slider" then
        CreateSlider(Content, setting.name, setting.min, setting.max, setting.value, function(val)
            -- Update prediction values
        end)
        yOffset = yOffset + 60
    -- Add other control types (keybinds, dropdowns) similarly
    end
end

-- Make window draggable
local dragging, dragInput, dragStart, startPos
TitleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

TitleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UIS.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Close button
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Keep original camlock functionality below
